# AI教学助手 - 使用说明

## 🎯 功能概述

AI教学助手是OECE的核心功能，基于Google Gemini AI，专为教育工作者设计。

### 主要功能
- ✅ **智能备课** - 快速生成教案和课程计划
- ✅ **测验生成** - 自动创建题目和评分标准
- ✅ **教学建议** - 提供创新的教学方法
- ✅ **课堂活动** - 设计互动性强的课堂活动
- ✅ **多轮对话** - 支持连续优化和深入讨论

## 💰 成本控制

### 使用限制
- **最大成本**: $10 USD
- **每次请求**: 约 $0.01 USD
- **最大请求**: 约 1000 次
- **实时追踪**: 显示使用进度和剩余额度

### Gemini API 成本
使用 `gemini-1.5-flash` 模型：
- **输入**: ~$0.000035/1k tokens
- **输出**: ~$0.00014/1k tokens
- **平均每次请求**: 约1000 tokens (输入+输出)
- **预估成本**: $0.01/请求

### 如何监控
1. 页面顶部显示使用统计
2. 进度条实时更新
3. LocalStorage保存使用记录
4. 达到限额自动停止

## 🛠️ 技术实现

### 前端
- **框架**: Next.js 15 + React
- **UI**: Tailwind CSS + shadcn/ui
- **状态管理**: React Hooks
- **存储**: LocalStorage

### 后端API
- **路由**: `/api/chat/gemini`
- **模型**: Gemini 1.5 Flash
- **配置**:
  ```typescript
  {
    temperature: 0.7,    // 创造性平衡
    topK: 40,           // 多样性
    topP: 0.95,         // 一致性
    maxOutputTokens: 2048  // 最大输出
  }
  ```

### 系统提示词
专门针对教育场景优化的提示词，确保：
- 回答专业、实用
- 基于教育学原理
- 结构清晰易懂
- 提供具体例子
- 支持中英文

## 📊 使用统计

### 客户端追踪
```typescript
// 保存在 localStorage
- chatUsageCount: 使用次数
- chatUsageCost: 累计成本
```

### 实时显示
- 使用次数
- 累计成本
- 使用进度百分比
- 剩余额度提醒

## 🚀 快速开始

### 1. 配置API Key
在 `.env.local` 文件中设置：
```bash
GEMINI_API_KEY=your_api_key_here
```

### 2. 访问页面
```
http://localhost:3000/tools/chat
```

### 3. 开始使用
- 点击快速提示模板
- 或直接输入问题
- Enter发送，Shift+Enter换行

## 📝 使用示例

### 示例1: 生成教案
```
帮我生成一个关于"Python基础编程"的90分钟教案，
包括学习目标、教学步骤、课堂活动和作业布置。
```

### 示例2: 设计测验
```
为"世界历史-第二次世界大战"创建一套包含10道选择题
和3道简答题的测验，附带参考答案。
```

### 示例3: 教学建议
```
我有一些学生在理解"牛顿第二定律"时遇到困难，
请给我一些创新的教学方法和实例。
```

### 示例4: 课堂活动
```
设计一个互动性强的课堂活动，帮助学生更好地理解
"英语语法-现在完成时"。
```

## ⚠️ 重要提示

### 安全性
- API Key保存在环境变量中
- 不要在前端暴露API Key
- 使用Next.js API路由作为代理

### 成本控制
- 前端限制：$10硬上限
- 后端应添加额外验证
- 考虑添加用户认证
- 定期检查API使用量

### 错误处理
- API配额超限：返回429错误
- 网络错误：显示重试提示
- 输入验证：防止空消息

## 🔧 未来优化

### 短期
- [ ] 添加用户认证
- [ ] 后端成本追踪
- [ ] 对话历史保存到数据库
- [ ] 导出对话为PDF/Word

### 中期
- [ ] 多用户支持
- [ ] 管理后台
- [ ] 使用量统计面板
- [ ] 订阅计划集成

### 长期
- [ ] 支持上传文件（课程大纲等）
- [ ] 多模态输入（图片、音频）
- [ ] AI生成课件（PPT）
- [ ] 智能推荐系统

## 📞 支持

遇到问题？
- GitHub Issues
- Email: support@oece.tech
- 文档: /docs

---

**最后更新**: 2025-01-05
**版本**: 1.0.0
